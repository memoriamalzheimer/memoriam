<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" href="../assets/favicon/cerebro.png">
    <link rel="stylesheet" href="../css/jogos.css">
    <link rel="stylesheet" href="../css/configgerais.css">
    <title>Memoriam: Jogos</title>
</head>

<body>
    <header>
        <nav class="itens">
            <ul>
                <li class="logo">
                    <img src="../assets/logo.png" alt="logo" draggable="false">
                    <h2>Memoriam</h2>
                    <span class="social">
                        <a href="https://www.instagram.com/memoriam.alzheimer?igsh=MWdkZ2I1dzF2ZWx3YQ==" target="_blank"
                            style="all: unset; cursor: pointer; display: inline-block; line-height: 0;">
                            <img class="instagram" src="../assets/instagram.svg" draggable="false" alt="Instagram">
                        </a>
                         <a href="https://www.instagram.com/memoriam.alzheimer?igsh=MWdkZ2I1dzF2ZWx3YQ==" target="_blank"
                            style="all: unset; cursor: pointer; display: inline-block; line-height: 0;">
                        <img class="facebook" src="../assets/facebook.svg" draggable="false" alt="Facebook">
                         </a>
                           <a href="https://www.instagram.com/memoriam.alzheimer?igsh=MWdkZ2I1dzF2ZWx3YQ==" target="_blank"
                            style="all: unset; cursor: pointer; display: inline-block; line-height: 0;">
                        <img class="twitter" src="../assets/twitter.svg" draggable="false" alt="Twitter">
                         </a>
                    </span>
                </li>
                <li><a href="<%= usuario ? '/inicio' : '/' %>">Início</a></li>
                <li><a href="/sobre">Sobre</a></li>
                <li><a href="#" class="ativo">Jogos</a></li>
                <li><a href="/faq">Perguntas Frequentes</a></li>
                <li>
                    <a href="/convite" id="linkConvite">
                        Convites
                        <span id="contadorConvite">0</span>
                    </a>
                </li>
                <li class="dropdown-login">
                    <% if (usuario) { %>
                        <a href="/logout">Sair</a>
                        <% } else { %>
                            <span class="dropdown-toggle">Login ▼</span>
                            <div class="dropdown-content-login">
                                <a href="/login">Entrar</a>
                                <a href="/registro">Registrar</a>
                            </div>
                            <% } %>
                </li>
            </ul>
        </nav>
    </header>

    <main>
        <h1>Jogos</h1>
        <div class="grade-jogos">
            <div class="grade1">
                <a class="card" href="/chess">
                    <img src="../html/assets/xadrez.svg" alt="Xadrez" loading="lazy" draggable="false">
                    <span>Xadrez</span>
                </a>
                <a class="card" href="/dama">
                    <img src="../html/assets/dama.svg" alt="Damas" loading="lazy" draggable="false">
                    <span>Damas</span>
                </a>
                <a class="card" href="/sudoku">
                    <img src="../html/assets/sudoku.png" alt="Sudoku" loading="lazy" draggable="false">
                    <span>Sudoku</span>
                </a>
            </div>
            <div class="grade2">
                <a class="card" href="/quebra">
                    <img src="../html/assets/quebra.svg" alt="Quebra-Cabeça" draggable="false">
                    <span>Quebra-Cabeça</span>
                </a>
                <a class="card" href="/jdmemoria">
                    <img src="../html/assets/memoria.svg" alt="Jogo da Memória" draggable="false">
                    <span>Jogo da Memória</span>
                </a>
                <a class="card" href="/stroop">
                    <img src="../html/assets/stroop.png" alt="Desafio Stroop" draggable="false">
                    <span>Desafio Stroop</span>
                </a>
            </div>
        </div>
    </main>

    <footer>
        <div class="footer-top">
            <ul>
                <li>Início</li>
                <li>Sobre</li>
                <li>Jogos</li>
            </ul>
            <ul>
                <li>FAQ</li>
                <li>Convites</li>
                <li>Doação</li>
            </ul>
            <ul>
                <li>Twitter</li>
                <li>Instagram</li>
                <li>Facebook</li>
            </ul>
        </div>
        <div class="footer-bottom">
            © 2025 Todos os direitos reservados.
        </div>
    </footer>


    <script src="../../js/atraso.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script>
        (function () {
            const socket = io();
            const meuId = "<%= usuario ? usuario.id : '' %>";
            socket.emit('registrarId', meuId);

            const contador = document.getElementById('contadorConvite');
            let convites = JSON.parse(localStorage.getItem('convitesPendentes') || '[]');
            let notificacoes = convites.length;

            function atualizarContador() {
                if (notificacoes > 0) {
                    contador.style.display = 'inline-block';
                    contador.textContent = notificacoes;
                } else {
                    contador.style.display = 'none';
                }
            }

            function salvarConvites() {
                localStorage.setItem('convitesPendentes', JSON.stringify(convites));
            }

            document.getElementById('linkConvite').addEventListener('click', () => {
                notificacoes = 0;
                atualizarContador();
            });

            socket.on('conviteRecebido', ({ de, conviteId }) => {
                const id = conviteId || 'local-' + Date.now() + '-' + Math.floor(Math.random() * 1000);
                convites.push({ id, tipo: 'jogo', de, timestamp: Date.now() });
                notificacoes++;
                salvarConvites();
                atualizarContador();
            });

            socket.on('conviteVideoRecebido', ({ de, conviteId }) => {
                const id = conviteId || 'local-' + Date.now() + '-' + Math.floor(Math.random() * 1000);
                convites.push({ id, tipo: 'video', de, timestamp: Date.now() });
                notificacoes++;
                salvarConvites();
                atualizarContador();
            });

            atualizarContador();
        })();
    </script>
</body>

</html>